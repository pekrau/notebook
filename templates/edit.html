{% extends 'base.html' %}

{% block head_title %}Edit note '{{ note["title"] or '<root>' }}'{% endblock %}
{% block body_title %}Edit note '{{ note["title"] or '<root>' }}'{% endblock %}

{% block meta %}
<button class="btn btn-clipboard btn-outline-none ps-0"
        data-clipboard-text="[[{{ note.path }}]]">
  <span class="bi-clipboard text-dark"></span>
</button>
<small>{{ note.modified | localtime }}</small>
{% endblock %}

{% block left %}
<div class="d-grid gap-2 mb-md-3">
  <a href="{{ url_for('note', path=note['path']) }}"
     class="btn btn-secondary px-5">Cancel</a>
</div>
{% include 'backlinks.html' %}
{% endblock %} {# block left #}

{% block main %}
<div class="card">
  <div class="card-body py-0">
    <form action="{{ url_for('edit', path=note['path']) }}"
          method="POST">
      {% if note.supernote %}
      <div class="mb-3">
        <label for="title" class="col-form-label">Title</label>
        <input type="text" name="title" id="title"
               aria-describedby="titleHelp"
               class="form-control"
               value="{{ note['title'] }}">
      </div>
      {% endif %}
      <div class="mb-3">
        <label for="text" class="col-form-label">Text</label>
        <textarea name="text" id="text" rows="16" autofocus
                  aria-describedby="textHelp"
                  class="form-control">{{ note['text'] or '' }}</textarea>
        <div id="textHelp" class="form-text">
          Text of the note in Markdown format.
        </div>
      </div>
      <div class="mb-3">
        <button type="submit" class="btn btn-primary px-5">Save</button>
      </div>
    </form>
  </div>
</div>
<a href="{{ url_for('note', path=note['path']) }}"
   class="btn btn-secondary m-md-3 px-5">Cancel</a>
{% endblock %} {# block main #}

{% block right %}
{% include 'starred.html' %}
{% include 'recent.html' %}
{% endblock %} {# block right #}

{% block javascript %}
<script src="{{ url_for('static', filename='clipboard.min.js') }}"></script>
<script>
 var clipboard = new ClipboardJS('.btn-clipboard');
</script>
{% endblock %}

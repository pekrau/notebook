{% extends 'base.html' %}
{% import 'macros.html' as macros with context %}

{% block head_title %}{{ note.title }}{% endblock %}
{% block body_title %}{{ note.title }}{% endblock %}

{% block menu %}
<ul class="list-group">
  <a href="{{ url_for('home') }}"
     class="list-group-item list-group-item-light"><i>home</i></a>
  {% for parent, path in note.parents %}
  <a href="{{ url_for('note', path=path) }}"
     class="list-group-item list-group-item-light">/ {{ parent }}</a>
  {% endfor %}
</ul>
{% endblock %} {# block menu #}

{% block main %}
{{ note['text'] | markdown }}
{{ macros.noteslist(note.subnotes, 2) }}
{% endblock %} {# block main #}

{% block actions %}
{% if interactive %}
<form action="{{ url_for('create') }}" method="GET" class="d-grid gap-2">
  {% if note.path %}
  <input type="hidden" name="parent" value="{{ note.path }}">
  {% endif %}
  <button type="submit" class="btn btn-success">Create</button>
</form>
<div class="d-grid gap-2 mt-2">
  <a href="{{ url_for('edit', path=note.path) }}"
     class="btn btn-primary">Edit</a>
</div>
<div>
  <form action="{{ url_for('delete', path=note.path) }}"
        method="POST"
        class="d-grid gap-2 mt-2">
    <button role="submit" class="btn btn-danger"
            onclick="return confirm('Really delete recursively? Cannot be undone.')"
            >Delete</button>
  </form>
</div>
{% endif %} {# if interactive #}
{% endblock %}
